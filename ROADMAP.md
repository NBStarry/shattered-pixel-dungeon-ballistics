# 功能路线图

## ✅ 已实现 (v1.0)
- [x] 基础网格系统
- [x] 实体放置（玩家/敌人/障碍物/墙体）
- [x] 弹道计算（基于游戏源码Ballistica.java）
- [x] 敌人→玩家弹道显示
- [x] 障碍物推荐位置
- [x] 预设场景（7个实战场景）
- [x] 移动端触摸优化
- [x] GitHub Pages部署

## 🚧 当前限制
- **单向弹道**：只计算"敌人能否打到玩家"
- **无法模拟玩家攻击**：不支持点击任意格子作为攻击目标
- **无双向对比**：无法同时显示"玩家能打敌人"+"敌人打不到玩家"

## 🎯 计划中功能 (v2.0)

### 1. 双向弹道系统 ⭐⭐⭐⭐⭐
**核心需求**（用户反馈）:
- 玩家可点击任意格子作为攻击目标
- 计算玩家→目标的弹道路径
- 判断敌人是否在弹道路径上（即使不是直接瞄准敌人）
- 同时显示敌人→玩家的弹道
- 用颜色区分：
  - 🟢 绿色：玩家能打到敌人
  - 🔴 红色：敌人能打到玩家
  - 🟡 黄色：双向都能打到
  - ⚪ 灰色：双向都打不到

**预期效果**：
```
场景：玩家在(6,10)，敌人在(14,10)，障碍物在(10,10)
1. 点击(14,10) → 弹道被阻挡 ❌
2. 点击(14,9)  → 弹道绕过障碍物，击中敌人 ✅
3. 敌人→玩家  → 弹道被阻挡 ❌
结果：玩家能打敌人，敌人打不到玩家！
```

### 2. 攻击模拟器
- 新增"攻击模式"工具
- 点击任意格子显示弹道路径
- 高亮路径上的所有敌人（AOE效果）
- 实时计算命中数量

### 3. 增强显示
- 弹道路径点显示
- 碰撞点特效
- 距离显示
- 命中率提示

### 4. 场景编辑器
- 保存/加载自定义场景
- 导出为JSON
- 分享链接（URL参数编码）

### 5. 高级功能
- 撤销/重做
- 网格大小自定义
- 多玩家支持（演示合作战术）
- 动画演示（弹道飞行轨迹）

## 💬 用户反馈

### 2026-02-27
**问题1**: 无法放置敌人
- ✅ 已修复：addEntity函数单复数映射错误

**问题2**: 预设场景不符合实际
- ✅ 已修复：重新设计7个实战场景

**需求**: 支持"点击敌人旁边格子打到敌人"的机制
- 🚧 待实现：双向弹道系统（v2.0核心功能）

---

**优先级**:
1. 🔥 双向弹道系统（核心玩法）
2. 🔥 攻击模拟器
3. ⭐ 场景编辑器
4. ⭐ 增强显示
5. 💡 高级功能

**预计发布**: v2.0 - 2026-03
