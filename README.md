# 破碎像素地牢 - 弹道计算器

一个帮助《破碎的像素地牢》(Shattered Pixel Dungeon)玩家计算和可视化"挡弹道"战术的手机Web应用。

## 功能特性

### 🎯 核心功能
- **网格编辑器**：可视化的20x20方格地图
- **实体放置**：
  - 🦸 玩家（绿色方块）
  - 👹 敌人（红色三角形）
  - 🛡️ 障碍物（黄色圆圈）- 可以阻挡弹道
  - 🧱 墙体（灰色方块）- 不可穿越
- **弹道计算**：使用Bresenham算法精确计算射击路径
- **智能推荐**：自动高亮推荐放置障碍物的位置

### 📱 移动优化
- 响应式设计，完美适配手机屏幕
- 触摸友好的操作界面
- 无需安装，浏览器直接运行

## 使用方法

### 基础操作

1. **选择工具**：点击顶部工具栏按钮选择要放置的对象
2. **放置实体**：点击网格任意位置放置选中的对象
3. **移除实体**：再次点击已有对象的位置即可移除
4. **计算弹道**：点击"🎯 计算弹道"按钮

### 弹道结果

- ✅ **绿色虚线**：弹道被阻挡（安全）
- ❌ **红色实线**：弹道畅通（危险）
- 💡 **黄色区域**：推荐放置障碍物的位置

### 游戏战术应用

#### 什么是"挡弹道"？
在《破碎的像素地牢》中，"挡弹道"是一种高级战术：
- 在你和远程敌人之间放置障碍物（如哨卫、幽妹、草）
- 敌人的远程攻击会被阻挡
- 但你仍然可以攻击敌人

#### 关键条件
- 敌人必须先"索敌"到你（锁定你为目标）
- 障碍物必须在弹道路径上

#### 常见应用场景
- **天狗战**：用哨卫/幽妹挡弹道
- **矮人王**：利用地形和召唤物
- **远程小怪**：草/灵壤守卫挡弹道

## 技术实现

### 核心算法
- **Bresenham直线算法**：精确计算弹道路径上的所有格子
- **碰撞检测**：检查路径上是否有障碍物阻挡
- **推荐算法**：自动识别最优障碍物放置位置

### 技术栈
- 纯HTML5 + JavaScript
- Canvas 2D绘图
- 响应式CSS

## 部署

### 本地运行
```bash
# 直接打开index.html
open index.html

# 或使用本地服务器
python -m http.server 8000
# 访问 http://localhost:8000
```

### 手机访问
将文件部署到任意Web服务器，或使用以下方式：
- GitHub Pages
- Vercel
- Netlify

## 示例场景

### 场景1：单敌人简单挡弹道
```
放置顺序：
1. 放置玩家(10, 10)
2. 放置敌人(5, 5)
3. 点击"计算弹道"查看红色弹道
4. 在黄色推荐位置放置障碍物
5. 再次点击"计算弹道"，弹道变绿✅
```

### 场景2：天狗战模拟
```
1. 玩家(10, 15)
2. 天狗敌人(10, 5) 
3. 在(10, 10)放置哨卫障碍物
4. 计算确认弹道被阻挡
```

## 游戏攻略参考

### 可用于挡弹道的物体
1. **哨卫**（法杖召唤）- 最常用
2. **幽妹**（神器）- 操作性强
3. **草** - 自然生成
4. **灵壤守卫**（法杖召唤）
5. **墙体/门** - 地形利用

### 高级技巧
- 在门口放置哨卫可以探怪
- 多个哨卫可以形成"封图"阵型
- 利用长武器配合幽妹最大化输出

## 未来计划

- [ ] 添加预设常见boss战场景
- [ ] 支持保存/加载自定义场景
- [ ] 添加多人协作模式
- [ ] 集成游戏Wiki数据
- [ ] 开发React Native原生app版本

## 贡献

欢迎提交Issue和Pull Request！

## 许可

MIT License

---

**Enjoy! 祝你在地牢中生存愉快！** 🦞
